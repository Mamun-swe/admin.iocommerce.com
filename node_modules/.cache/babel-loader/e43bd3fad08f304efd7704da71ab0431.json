{"ast":null,"code":"var _jsxFileName = \"/media/mamun/Tools/iocommerce/admin/src/pages/master/Index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './style.scss';\nimport jwtDecode from 'jwt-decode';\nimport { Switch, Route } from 'react-router-dom';\nimport { routes } from '../../routes/Index';\nimport Navbar from '../../components/navbar/Index';\nimport Drawer from '../../components/drawer/Index'; // --- 404 ---\n\nimport FourOFour from '../404/Index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Index = () => {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const [permitted, setPermitted] = useState([]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      const decode = jwtDecode(token);\n      const permissions = decode.permissions; // Filter permitted routes from given permissions\n\n      if (routes && routes.length) {\n        const isAll = permissions.find(item => item === \"all\");\n\n        if (isAll) {\n          return setPermitted(routes);\n        } else {\n          const permittedRoutes = routes.filter(({\n            name: routeName\n          }) => permissions.some(x => x === routeName));\n          setPermitted(permittedRoutes);\n        }\n      }\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"master\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      menu: true,\n      drawer: () => setOpen(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n      routes: permitted,\n      show: open,\n      onHide: () => setOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [permitted && permitted.map((item, i) => item.name && item.path ? /*#__PURE__*/_jsxDEV(Route, {\n          exact: item.exact,\n          path: item.path,\n          component: item.component\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 29\n        }, this) : item.child && item.child.length ? item.child.map((child, j) => /*#__PURE__*/_jsxDEV(Route, {\n          exact: child.exact,\n          path: child.path,\n          component: child.component\n        }, j, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 33\n        }, this)) : null), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          component: FourOFour\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Index, \"a5ialRvU+QZv33sFlVWRXp/3YE0=\");\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/media/mamun/Tools/iocommerce/admin/src/pages/master/Index.js"],"names":["React","useState","useEffect","jwtDecode","Switch","Route","routes","Navbar","Drawer","FourOFour","Index","open","setOpen","permitted","setPermitted","token","localStorage","getItem","decode","permissions","length","isAll","find","item","permittedRoutes","filter","name","routeName","some","x","map","i","path","exact","component","child","j"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './style.scss'\nimport jwtDecode from 'jwt-decode'\nimport { Switch, Route } from 'react-router-dom'\nimport { routes } from '../../routes/Index'\n\nimport Navbar from '../../components/navbar/Index'\nimport Drawer from '../../components/drawer/Index'\n\n// --- 404 ---\nimport FourOFour from '../404/Index'\n\nconst Index = () => {\n    const [open, setOpen] = useState(false)\n    const [permitted, setPermitted] = useState([])\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"token\")\n        if (token) {\n            const decode = jwtDecode(token)\n            const permissions = decode.permissions\n\n            // Filter permitted routes from given permissions\n            if (routes && routes.length) {\n                const isAll = permissions.find(item => item === \"all\")\n\n                if (isAll) {\n                    return setPermitted(routes)\n                } else {\n                    const permittedRoutes = routes.filter(({ name: routeName }) => permissions.some(x => x === routeName))\n                    setPermitted(permittedRoutes)\n                }\n            }\n        }\n    }, [])\n\n    return (\n        <div className=\"master\">\n            <Navbar menu={true} drawer={() => setOpen(true)} />\n            <Drawer routes={permitted} show={open} onHide={() => setOpen(false)} />\n\n            <div className=\"main\">\n                <Switch>\n\n                    {permitted && permitted.map((item, i) =>\n                        item.name && item.path ?\n                            <Route\n                                key={i}\n                                exact={item.exact}\n                                path={item.path}\n                                component={item.component}\n                            />\n                            : item.child && item.child.length ? item.child.map((child, j) =>\n                                <Route\n                                    key={j}\n                                    exact={child.exact}\n                                    path={child.path}\n                                    component={child.component}\n                                />\n                            ) : null)\n                    }\n\n                    <Route path=\"*\" component={FourOFour} />\n\n                </Switch>\n            </div>\n        </div>\n    )\n}\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}