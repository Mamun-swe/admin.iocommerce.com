{"ast":null,"code":"var _jsxFileName = \"/media/mamun/Tools/GrapFood/admin/src/pages/product/Edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport _ from 'lodash';\nimport { Link, useParams } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { ChevronLeft, X } from 'react-feather';\nimport JoditEditor from 'jodit-react';\nimport { GrayButton, PrimaryButton } from '../../components/button/Index';\nimport { SingleSelect, Creatable } from '../../components/select/Index';\nimport { Loader } from '../../components/loader/Index';\nimport { Layout, Main } from '../../components/layout/Index';\nimport { FileUploader } from '../../components/fileUploader/Single';\nimport DeleteModal from '../../components/modals/delete/Index';\nimport Requests from '../../utils/Requests/Index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Edit = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const editor = useRef(null);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const [loading, setLoading] = useState(true);\n  const [update, setUpdate] = useState(false);\n  const [data, setData] = useState(null);\n  const [category, setCategory] = useState({\n    options: [],\n    value: null,\n    error: null\n  });\n  const [tags, setTags] = useState({\n    value: [],\n    error: null\n  });\n  const [content, setContent] = useState('');\n  const [image, setImage] = useState({\n    preview: null,\n    loading: false\n  });\n  const [images, setImages] = useState({\n    previews: [],\n    loading: false,\n    error: null\n  });\n  const [isDelete, setDelete] = useState({\n    value: null,\n    show: false,\n    loading: false\n  });\n  const [header] = useState({\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem('token')\n    }\n  }); // Text editor config\n\n  const config = {\n    readonly: false,\n    minHeight: 350,\n    uploader: {\n      \"insertImageAsBase64URI\": true\n    }\n  }; // Fetch data\n\n  const fetchData = useCallback(async () => {\n    const response = await Requests.Product.Show(id, header);\n    const optionsRes = await Requests.Options.Index(header);\n\n    if (response && optionsRes) {\n      setData(response.data);\n      setImage(exImage => ({ ...exImage,\n        preview: response.data.images.small\n      }));\n      setImages(exImages => ({ ...exImages,\n        previews: response.data.images.additional\n      }));\n      setCategory(exCategory => ({ ...exCategory,\n        options: optionsRes.categories,\n        value: response.data.category._id || null\n      }));\n      setTags(exTags => ({ ...exTags,\n        value: response.data.tags || null\n      }));\n      setContent(response.data.description);\n    }\n\n    setLoading(false);\n  }, [id, header]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]); // Handle form submission\n\n  const onSubmit = async data => {\n    if (!category.value) return setCategory({ ...category,\n      error: \"Category is required.\"\n    });\n    if (!tags.value.length) return setTags({ ...tags,\n      error: \"Tags is required.\"\n    });\n    const formData = { ...data,\n      vendor: vendor.value,\n      brand: brand.value,\n      category: category.value,\n      tags: tags.value,\n      description: content\n    };\n    setUpdate(true);\n    await Requests.Product.Update(id, formData, header);\n    setUpdate(false);\n  }; // Handle Small Image\n\n\n  const smImageHandeller = async event => {\n    let file = event.image;\n\n    if (file) {\n      setImage({\n        preview: URL.createObjectURL(file),\n        loading: true\n      });\n      let formData = new FormData();\n      formData.append('image', file);\n      await Requests.Product.UpdateSMImage(id, formData, header);\n      setImage({\n        preview: URL.createObjectURL(file),\n        loading: false\n      });\n    }\n  }; // Handle to add additional images\n\n\n  const fileAdditionHandeller = async event => {\n    const file = event.image;\n    const fileURl = URL.createObjectURL(file);\n\n    if (file) {\n      setImages(exImages => ({ ...exImages,\n        previews: [...exImages.previews, fileURl],\n        loading: true\n      }));\n      let formData = new FormData();\n      formData.append('image', file);\n      await Requests.Product.AddAdditional(id, formData, header);\n      setImages(exImages => ({ ...exImages,\n        loading: false\n      }));\n    }\n  }; // Handle delete\n\n\n  const handleDeleteImage = async () => {\n    setDelete({ ...isDelete,\n      loading: true\n    });\n    const item = isDelete.value.split(\"/\");\n\n    const file = _.last(item);\n\n    await Requests.Product.RemoveAdditional(id, file, header);\n    const unRemovedFiles = images.previews.filter(x => x !== isDelete.value);\n    setImages(exImages => ({ ...exImages,\n      previews: unRemovedFiles\n    }));\n    setDelete({ ...isDelete,\n      show: false,\n      loading: false\n    });\n  };\n\n  if (loading) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Layout, {\n      page: \"dashboard / product edit\",\n      message: `Edit ${data.name}`,\n      container: \"container-fluid\",\n      button: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/product\",\n          children: /*#__PURE__*/_jsxDEV(GrayButton, {\n            type: \"button\",\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              size: 15,\n              style: {\n                marginRight: 5\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 13\n              },\n              children: \"BACK\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-4\",\n            children: [errors.name && errors.name.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-danger\",\n              children: errors.name && errors.name.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Product name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 35\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter product name\",\n              defaultValue: data.name || null,\n              className: errors.name ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n              ...register(\"name\", {\n                required: \"Product name is required\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [category.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: category.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                  placeholder: \"category\",\n                  error: category.error,\n                  options: category.options,\n                  deafult: data.category ? {\n                    label: data.category.name,\n                    value: data.category._id\n                  } : null,\n                  value: event => setCategory({ ...category,\n                    value: event.value,\n                    error: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-8\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [tags.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: tags.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Tags\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(Creatable, {\n                  placeholder: \"Enter tags\",\n                  error: tags.error,\n                  deafult: data.tags ? data.tags.map(item => ({\n                    value: item,\n                    label: item\n                  })) : null,\n                  value: event => setTags({\n                    value: event,\n                    error: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.sku && errors.sku.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.sku && errors.sku.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Product SKU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Enter product SKU\",\n                  defaultValue: data.sku || null,\n                  className: errors.sku ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"sku\", {\n                    required: \"Product SKU is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.stockAmount && errors.stockAmount.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.stockAmount && errors.stockAmount.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Stock amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter stock amount\",\n                  defaultValue: data.stockAmount || null,\n                  className: errors.stockAmount ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"stockAmount\", {\n                    required: \"Stock amount is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.purchasePrice && errors.purchasePrice.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.purchasePrice && errors.purchasePrice.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Purchase price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter stock amount\",\n                  defaultValue: data.stockAmount || null,\n                  className: errors.purchasePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"purchasePrice\", {\n                    required: \"Purchase price is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.salePrice && errors.salePrice.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.salePrice && errors.salePrice.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Sale price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter stock amount\",\n                  defaultValue: data.salePrice || null,\n                  className: errors.salePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"salePrice\", {\n                    required: \"Sale price is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(JoditEditor, {\n              ref: editor,\n              value: data.description || content,\n              config: config,\n              tabIndex: 8,\n              onBlur: newContent => setContent(newContent)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Youtube embed link\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter youtube embed link\",\n              className: \"form-control shadow-none\",\n              defaultValue: data.video || null,\n              ...register(\"video\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-end mt-3\",\n            children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n              type: \"submit\",\n              disabled: update,\n              className: \"px-4\",\n              children: update ? \"Updating ...\" : \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FileUploader, {\n          width: 100,\n          height: 100,\n          limit: 100,\n          loading: image.loading,\n          title: \"Product image\",\n          error: image.error,\n          default: image.preview,\n          dataHandeller: smImageHandeller\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-1 ms-1\",\n          children: \"Additional Images\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-wrap\",\n          children: [images.previews && images.previews.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border m-1\",\n            style: {\n              width: 100,\n              height: 100,\n              overflow: \"hidden\",\n              position: \"relative\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item,\n              style: {\n                width: \"100%\",\n                height: \"100%\"\n              },\n              alt: \"...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(GrayButton, {\n              style: {\n                position: \"absolute\",\n                top: 0,\n                right: 0,\n                borderRadius: \"50%\",\n                padding: \"5px 8px\"\n              },\n              onClick: () => setDelete({\n                value: item,\n                show: true\n              }),\n              children: /*#__PURE__*/_jsxDEV(X, {\n                size: 15,\n                color: \"red\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 33\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 29\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"m-1\",\n            style: {\n              width: 100,\n              height: 100\n            },\n            children: /*#__PURE__*/_jsxDEV(FileUploader, {\n              width: 100,\n              height: 100,\n              limit: 100,\n              error: images.error,\n              loading: images.loading,\n              dataHandeller: fileAdditionHandeller\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DeleteModal, {\n      show: isDelete.show,\n      loading: isDelete.loading,\n      message: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"Want to delete this image ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: isDelete.value ? isDelete.value : null,\n          className: \"img-fluid\",\n          height: 150,\n          alt: \"Banner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 21\n      }, this),\n      onHide: () => setDelete({\n        value: null,\n        show: false,\n        loading: false\n      }),\n      doDelete: handleDeleteImage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Edit, \"lrqNlnffKpyl27tGrTXvq8SSl2o=\", false, function () {\n  return [useParams, useForm];\n});\n\n_c = Edit;\nexport default Edit;\n\nvar _c;\n\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"sources":["/media/mamun/Tools/GrapFood/admin/src/pages/product/Edit.js"],"names":["React","useState","useRef","useEffect","useCallback","_","Link","useParams","useForm","ChevronLeft","X","JoditEditor","GrayButton","PrimaryButton","SingleSelect","Creatable","Loader","Layout","Main","FileUploader","DeleteModal","Requests","Edit","id","editor","register","handleSubmit","formState","errors","loading","setLoading","update","setUpdate","data","setData","category","setCategory","options","value","error","tags","setTags","content","setContent","image","setImage","preview","images","setImages","previews","isDelete","setDelete","show","header","headers","Authorization","localStorage","getItem","config","readonly","minHeight","uploader","fetchData","response","Product","Show","optionsRes","Options","Index","exImage","small","exImages","additional","exCategory","categories","_id","exTags","description","onSubmit","length","formData","vendor","brand","Update","smImageHandeller","event","file","URL","createObjectURL","FormData","append","UpdateSMImage","fileAdditionHandeller","fileURl","AddAdditional","handleDeleteImage","item","split","last","RemoveAdditional","unRemovedFiles","filter","x","name","marginRight","fontSize","message","required","label","map","sku","stockAmount","purchasePrice","salePrice","newContent","video","i","width","height","overflow","position","top","right","borderRadius","padding"],"mappings":"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","sourcesContent":["\nimport React, { useState, useRef, useEffect, useCallback } from 'react'\nimport _ from 'lodash'\nimport { Link, useParams } from 'react-router-dom'\nimport { useForm } from 'react-hook-form'\nimport { ChevronLeft, X } from 'react-feather'\nimport JoditEditor from 'jodit-react'\nimport {\n    GrayButton,\n    PrimaryButton\n} from '../../components/button/Index'\nimport {\n    SingleSelect,\n    Creatable\n} from '../../components/select/Index'\nimport { Loader } from '../../components/loader/Index'\nimport { Layout, Main } from '../../components/layout/Index'\nimport { FileUploader } from '../../components/fileUploader/Single'\nimport DeleteModal from '../../components/modals/delete/Index'\nimport Requests from '../../utils/Requests/Index'\n\n\nconst Edit = () => {\n    const { id } = useParams()\n    const editor = useRef(null)\n    const { register, handleSubmit, formState: { errors } } = useForm()\n    const [loading, setLoading] = useState(true)\n    const [update, setUpdate] = useState(false)\n\n    const [data, setData] = useState(null)\n    const [category, setCategory] = useState({ options: [], value: null, error: null })\n    const [tags, setTags] = useState({ value: [], error: null })\n\n    const [content, setContent] = useState('')\n    const [image, setImage] = useState({ preview: null, loading: false })\n    const [images, setImages] = useState({ previews: [], loading: false, error: null })\n    const [isDelete, setDelete] = useState({ value: null, show: false, loading: false })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Text editor config\n    const config = {\n        readonly: false,\n        minHeight: 350,\n        uploader: {\n            \"insertImageAsBase64URI\": true\n        }\n    }\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        const response = await Requests.Product.Show(id, header)\n        const optionsRes = await Requests.Options.Index(header)\n        if (response && optionsRes) {\n            setData(response.data)\n            setImage(exImage => ({ ...exImage, preview: response.data.images.small }))\n            setImages(exImages => ({ ...exImages, previews: response.data.images.additional }))\n\n            setCategory(exCategory => ({ ...exCategory, options: optionsRes.categories, value: response.data.category._id || null }))\n            setTags(exTags => ({ ...exTags, value: response.data.tags || null }))\n\n            setContent(response.data.description)\n        }\n        setLoading(false)\n    }, [id, header])\n\n    useEffect(() => {\n        fetchData()\n    }, [fetchData])\n\n    // Handle form submission\n    const onSubmit = async data => {\n\n        if (!category.value) return setCategory({ ...category, error: \"Category is required.\" })\n        if (!tags.value.length) return setTags({ ...tags, error: \"Tags is required.\" })\n\n        const formData = {\n            ...data,\n            vendor: vendor.value,\n            brand: brand.value,\n            category: category.value,\n            tags: tags.value,\n            description: content\n        }\n\n        setUpdate(true)\n        await Requests.Product.Update(id, formData, header)\n        setUpdate(false)\n    }\n\n    // Handle Small Image\n    const smImageHandeller = async (event) => {\n        let file = event.image\n        if (file) {\n            setImage({ preview: URL.createObjectURL(file), loading: true })\n\n            let formData = new FormData()\n            formData.append('image', file)\n\n            await Requests.Product.UpdateSMImage(id, formData, header)\n            setImage({ preview: URL.createObjectURL(file), loading: false })\n        }\n    }\n\n    // Handle to add additional images\n    const fileAdditionHandeller = async (event) => {\n        const file = event.image\n        const fileURl = URL.createObjectURL(file)\n        if (file) {\n\n            setImages(exImages => ({\n                ...exImages,\n                previews: [...exImages.previews, fileURl],\n                loading: true\n            }))\n\n            let formData = new FormData()\n            formData.append('image', file)\n\n            await Requests.Product.AddAdditional(id, formData, header)\n            setImages(exImages => ({ ...exImages, loading: false }))\n        }\n    }\n\n    // Handle delete\n    const handleDeleteImage = async () => {\n        setDelete({ ...isDelete, loading: true })\n\n        const item = isDelete.value.split(\"/\")\n        const file = _.last(item)\n\n        await Requests.Product.RemoveAdditional(id, file, header)\n        const unRemovedFiles = images.previews.filter(x => x !== isDelete.value)\n\n        setImages(exImages => ({ ...exImages, previews: unRemovedFiles }))\n        setDelete({ ...isDelete, show: false, loading: false })\n    }\n\n\n    if (loading) return <Loader />\n\n    return (\n        <div>\n            <Layout\n                page=\"dashboard / product edit\"\n                message={`Edit ${data.name}`}\n                container=\"container-fluid\"\n                button={\n                    <div>\n                        <Link to=\"/dashboard/product\">\n                            <GrayButton type=\"button\">\n                                <ChevronLeft size={15} style={{ marginRight: 5 }} />\n                                <span style={{ fontSize: 13 }}>BACK</span>\n                            </GrayButton>\n                        </Link>\n                    </div>\n                }\n            />\n\n            <Main>\n                <div className=\"col-12\">\n                    <form onSubmit={handleSubmit(onSubmit)}>\n\n                        {/* Name */}\n                        <div className=\"form-group mb-4\">\n                            {errors.name && errors.name.message ?\n                                <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                : <p>Product name</p>}\n\n                            <input\n                                type=\"text\"\n                                placeholder=\"Enter product name\"\n                                defaultValue={data.name || null}\n                                className={errors.name ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                {...register(\"name\", { required: \"Product name is required\" })}\n                            />\n                        </div>\n\n                        <div className=\"row\">\n\n                            {/* Category */}\n                            <div className=\"col-12 col-lg-4\">\n                                <div className=\"form-group mb-4\">\n                                    {category.error ?\n                                        <p className=\"text-danger\">{category.error}</p>\n                                        : <p>Category</p>}\n\n                                    <SingleSelect\n                                        placeholder=\"category\"\n                                        error={category.error}\n                                        options={category.options}\n                                        deafult={data.category ? { label: data.category.name, value: data.category._id } : null}\n                                        value={event => setCategory({ ...category, value: event.value, error: null })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Tags */}\n                            <div className=\"col-12 col-lg-8\">\n                                <div className=\"form-group mb-4\">\n                                    {tags.error ?\n                                        <p className=\"text-danger\">{tags.error}</p>\n                                        : <p>Tags</p>}\n\n                                    <Creatable\n                                        placeholder=\"Enter tags\"\n                                        error={tags.error}\n                                        deafult={data.tags ? data.tags.map(item => ({ value: item, label: item })) : null}\n                                        value={event => setTags({ value: event, error: null })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* SKU */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.sku && errors.sku.message ?\n                                        <p className=\"text-danger\">{errors.sku && errors.sku.message}</p>\n                                        : <p>Product SKU</p>}\n\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Enter product SKU\"\n                                        defaultValue={data.sku || null}\n                                        className={errors.sku ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"sku\", { required: \"Product SKU is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Stock amount */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.stockAmount && errors.stockAmount.message ?\n                                        <p className=\"text-danger\">{errors.stockAmount && errors.stockAmount.message}</p>\n                                        : <p>Stock amount</p>}\n\n                                    <input\n                                        type=\"number\"\n                                        placeholder=\"Enter stock amount\"\n                                        defaultValue={data.stockAmount || null}\n                                        className={errors.stockAmount ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"stockAmount\", { required: \"Stock amount is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Purchase price */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.purchasePrice && errors.purchasePrice.message ?\n                                        <p className=\"text-danger\">{errors.purchasePrice && errors.purchasePrice.message}</p>\n                                        : <p>Purchase price</p>}\n\n                                    <input\n                                        type=\"number\"\n                                        placeholder=\"Enter stock amount\"\n                                        defaultValue={data.stockAmount || null}\n                                        className={errors.purchasePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"purchasePrice\", { required: \"Purchase price is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Sale price */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.salePrice && errors.salePrice.message ?\n                                        <p className=\"text-danger\">{errors.salePrice && errors.salePrice.message}</p>\n                                        : <p>Sale price</p>}\n\n                                    <input\n                                        type=\"number\"\n                                        placeholder=\"Enter stock amount\"\n                                        defaultValue={data.salePrice || null}\n                                        className={errors.salePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"salePrice\", { required: \"Sale price is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                        </div>\n\n                        {/* Description */}\n                        <div className=\"form-group mb-4\">\n                            <p>Description</p>\n\n                            <JoditEditor\n                                ref={editor}\n                                value={data.description || content}\n                                config={config}\n                                tabIndex={8}\n                                onBlur={newContent => setContent(newContent)}\n                            />\n                        </div>\n\n                        {/* Youtube embed link */}\n                        <div className=\"form-group mb-4\">\n                            <p>Youtube embed link</p>\n\n                            <input\n                                type=\"text\"\n                                placeholder=\"Enter youtube embed link\"\n                                className=\"form-control shadow-none\"\n                                defaultValue={data.video || null}\n                                {...register(\"video\")}\n                            />\n                        </div>\n\n                        <div className=\"text-end mt-3\">\n                            <PrimaryButton\n                                type=\"submit\"\n                                disabled={update}\n                                className=\"px-4\"\n                            >\n                                {update ? \"Updating ...\" : \"Update\"}\n                            </PrimaryButton>\n                        </div>\n                    </form>\n\n                    {/* Single File uploader */}\n                    <FileUploader\n                        width={100}\n                        height={100}\n                        limit={100}\n                        loading={image.loading}\n                        title=\"Product image\"\n                        error={image.error}\n                        default={image.preview}\n                        dataHandeller={smImageHandeller}\n                    />\n\n                    {/* Additional images */}\n                    <p className=\"mb-1 ms-1\">Additional Images</p>\n                    <div className=\"d-flex flex-wrap\">\n\n                        {images.previews && images.previews.map((item, i) =>\n                            <div\n                                className=\"border m-1\"\n                                style={{\n                                    width: 100,\n                                    height: 100,\n                                    overflow: \"hidden\",\n                                    position: \"relative\"\n                                }}\n                                key={i}\n                            >\n                                <img\n                                    src={item}\n                                    style={{ width: \"100%\", height: \"100%\" }}\n                                    alt=\"...\"\n                                />\n\n                                {/* Remove button */}\n                                <GrayButton\n                                    style={{\n                                        position: \"absolute\",\n                                        top: 0,\n                                        right: 0,\n                                        borderRadius: \"50%\",\n                                        padding: \"5px 8px\"\n                                    }}\n                                    onClick={() => setDelete({ value: item, show: true })}\n                                >\n                                    <X size={15} color=\"red\" />\n                                </GrayButton>\n                            </div>\n                        )}\n\n                        {/* New file addition */}\n                        <div className=\"m-1\" style={{ width: 100, height: 100 }}>\n                            <FileUploader\n                                width={100}\n                                height={100}\n                                limit={100}\n                                error={images.error}\n                                loading={images.loading}\n                                dataHandeller={fileAdditionHandeller}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </Main>\n\n            {/* Delete confirmation modal */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={\n                    <div>\n                        <h6>Want to delete this image ?</h6>\n                        <img src={isDelete.value ? isDelete.value : null} className=\"img-fluid\" height={150} alt=\"Banner\" />\n                    </div>\n                }\n                onHide={() => setDelete({ value: null, show: false, loading: false })}\n                doDelete={handleDeleteImage}\n            />\n        </div>\n    );\n}\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}