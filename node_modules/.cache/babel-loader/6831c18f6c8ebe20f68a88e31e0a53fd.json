{"ast":null,"code":"var _jsxFileName = \"/media/mamun/Tools/GrapFood/admin/src/pages/product/Create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { ChevronLeft } from 'react-feather';\nimport JoditEditor from 'jodit-react';\nimport { GrayButton, PrimaryButton } from '../../components/button/Index';\nimport { Layout, Main } from '../../components/layout/Index';\nimport { FileUploader } from '../../components/fileUploader/Single';\nimport { SingleSelect, Creatable } from '../../components/select/Index';\nimport { MultiFileUploader } from '../../components/fileUploader/Multi';\nimport { AdditionalInfo } from '../../components/product/AdditionalInfo';\nimport { Loader } from '../../components/loader/Index';\nimport Requests from '../../utils/Requests/Index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Create = () => {\n  _s();\n\n  const editor = useRef(null);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const [loading, setLoading] = useState(true);\n  const [isCreate, setCreate] = useState(false);\n  const [vendor, setVendor] = useState({\n    options: [],\n    value: null,\n    error: null\n  });\n  const [brand, setBrand] = useState({\n    options: [],\n    value: null\n  });\n  const [category, setCategory] = useState({\n    options: [],\n    value: null,\n    error: null\n  });\n  const [tags, setTags] = useState({\n    value: [],\n    error: null\n  });\n  const [additional, setAdditional] = useState(null);\n  const [content, setContent] = useState('');\n  const [image, setImage] = useState({\n    value: null,\n    error: null\n  });\n  const [images, setImages] = useState({\n    value: [],\n    error: null\n  });\n  const [header] = useState({\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem('token')\n    }\n  });\n  const config = {\n    readonly: false,\n    minHeight: 350,\n    uploader: {\n      \"insertImageAsBase64URI\": true\n    }\n  }; // Fetch data\n\n  const fetchData = useCallback(async () => {\n    const optionsRes = await Requests.Options.Index(header);\n\n    if (optionsRes) {\n      setCategory(exCategory => ({ ...exCategory,\n        options: optionsRes.categories\n      }));\n    }\n\n    setLoading(false);\n  }, [header]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]); // Handle form submission\n\n  const onSubmit = async data => {\n    if (!vendor.value) return setVendor({ ...vendor,\n      error: \"Vendor is required.\"\n    });\n    if (!category.value) return setCategory({ ...category,\n      error: \"Category is required.\"\n    });\n    if (!tags.value.length) return setTags({ ...tags,\n      error: \"Tags is required.\"\n    });\n    if (!image.value) return setImage({ ...image,\n      error: \"Product image is required.\"\n    });\n    if (!images.value.length) return setImages({ ...images,\n      error: \"Additional images is required.\"\n    });\n    setCreate(true);\n    const formData = new FormData();\n    formData.append('name', data.name);\n    formData.append('vendor', vendor.value);\n    formData.append('brand', brand.value);\n    formData.append('category', category.value);\n    formData.append('tags', tags.value);\n    formData.append('sku', data.sku);\n    formData.append('stockAmount', data.stockAmount);\n    formData.append('purchasePrice', data.purchasePrice);\n    formData.append('salePrice', data.salePrice);\n    formData.append('additionalInfo', JSON.stringify(additional));\n    formData.append('description', content);\n    formData.append('video', data.video);\n    formData.append('image', image.value);\n\n    for (const key of Object.keys(images.value)) {\n      formData.append('images', images.value[key]);\n    }\n\n    await Requests.Product.Store(formData, header);\n    setCreate(false);\n  };\n\n  if (loading) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Layout, {\n      page: \"dashboard / product store\",\n      message: \"Store new product for visible to website.\",\n      container: \"container-fluid\",\n      button: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/product\",\n          children: /*#__PURE__*/_jsxDEV(GrayButton, {\n            type: \"button\",\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              size: 15,\n              style: {\n                marginRight: 5\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 13\n              },\n              children: \"BACK\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-4\",\n            children: [errors.name && errors.name.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-danger\",\n              children: errors.name && errors.name.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Product name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 35\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter product name\",\n              className: errors.name ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n              ...register(\"name\", {\n                required: \"Product name is required\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [vendor.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: vendor.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Vendor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                  placeholder: \"vendor\",\n                  error: vendor.error,\n                  options: vendor.options,\n                  value: event => setVendor({ ...vendor,\n                    value: event.value,\n                    error: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Brand\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                  placeholder: \"brand\",\n                  options: brand.options,\n                  value: event => setBrand({ ...brand,\n                    value: event.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [category.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: category.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                  placeholder: \"category\",\n                  error: category.error,\n                  options: category.options,\n                  value: event => setCategory({ ...category,\n                    value: event.value,\n                    error: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-8\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [tags.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: tags.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Tags\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(Creatable, {\n                  placeholder: \"Enter tags\",\n                  error: tags.error,\n                  value: event => setTags({\n                    value: event,\n                    error: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.sku && errors.sku.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.sku && errors.sku.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Product SKU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Enter product SKU\",\n                  className: errors.sku ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"sku\", {\n                    required: \"Product SKU is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.stockAmount && errors.stockAmount.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.stockAmount && errors.stockAmount.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Stock amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter stock amount\",\n                  className: errors.stockAmount ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"stockAmount\", {\n                    required: \"Stock amount is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.purchasePrice && errors.purchasePrice.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.purchasePrice && errors.purchasePrice.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Purchase price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter stock amount\",\n                  className: errors.purchasePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"purchasePrice\", {\n                    required: \"Purchase price is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 col-lg-6 col-xl-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-4\",\n                children: [errors.salePrice && errors.salePrice.message ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-danger\",\n                  children: errors.salePrice && errors.salePrice.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Sale price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter stock amount\",\n                  className: errors.salePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\",\n                  ...register(\"salePrice\", {\n                    required: \"Sale price is required\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AdditionalInfo, {\n            data: value => setAdditional(value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(JoditEditor, {\n              ref: editor,\n              value: content,\n              config: config,\n              tabIndex: 8,\n              onBlur: newContent => setContent(newContent)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Youtube embed link\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter youtube embed link\",\n              className: \"form-control shadow-none\",\n              ...register(\"video\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FileUploader, {\n            width: 100,\n            height: 100,\n            limit: 100,\n            title: \"Product image\",\n            error: image.error,\n            dataHandeller: data => setImage({ ...image,\n              value: data.image || null,\n              error: data.error || null\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(MultiFileUploader, {\n            width: 100,\n            height: 100,\n            limit: 8192,\n            error: images.error,\n            title: \"Additional images\",\n            dataHandeller: data => setImages({ ...images,\n              value: data.images || null,\n              error: data.error || null\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-end\",\n            children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n              type: \"submit\",\n              disabled: isCreate,\n              className: \"px-4\",\n              children: isCreate ? \"Loading ...\" : \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Create, \"/Oitst2z7aQcDdpzQ9POmQ3ieNw=\", false, function () {\n  return [useForm];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/media/mamun/Tools/GrapFood/admin/src/pages/product/Create.js"],"names":["React","useState","useRef","useCallback","useEffect","Link","useForm","ChevronLeft","JoditEditor","GrayButton","PrimaryButton","Layout","Main","FileUploader","SingleSelect","Creatable","MultiFileUploader","AdditionalInfo","Loader","Requests","Create","editor","register","handleSubmit","formState","errors","loading","setLoading","isCreate","setCreate","vendor","setVendor","options","value","error","brand","setBrand","category","setCategory","tags","setTags","additional","setAdditional","content","setContent","image","setImage","images","setImages","header","headers","Authorization","localStorage","getItem","config","readonly","minHeight","uploader","fetchData","optionsRes","Options","Index","exCategory","categories","onSubmit","data","length","formData","FormData","append","name","sku","stockAmount","purchasePrice","salePrice","JSON","stringify","video","key","Object","keys","Product","Store","marginRight","fontSize","message","required","event","newContent"],"mappings":"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","sourcesContent":["\nimport React, { useState, useRef, useCallback, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useForm } from 'react-hook-form'\nimport { ChevronLeft } from 'react-feather'\nimport JoditEditor from 'jodit-react'\nimport {\n    GrayButton,\n    PrimaryButton\n} from '../../components/button/Index'\nimport { Layout, Main } from '../../components/layout/Index'\nimport { FileUploader } from '../../components/fileUploader/Single'\nimport { SingleSelect, Creatable } from '../../components/select/Index'\nimport { MultiFileUploader } from '../../components/fileUploader/Multi'\nimport { AdditionalInfo } from '../../components/product/AdditionalInfo'\nimport { Loader } from '../../components/loader/Index'\nimport Requests from '../../utils/Requests/Index'\n\nconst Create = () => {\n    const editor = useRef(null)\n    const { register, handleSubmit, formState: { errors } } = useForm()\n    const [loading, setLoading] = useState(true)\n    const [isCreate, setCreate] = useState(false)\n    const [vendor, setVendor] = useState({ options: [], value: null, error: null })\n    const [brand, setBrand] = useState({ options: [], value: null })\n    const [category, setCategory] = useState({ options: [], value: null, error: null })\n    const [tags, setTags] = useState({ value: [], error: null })\n    const [additional, setAdditional] = useState(null)\n    const [content, setContent] = useState('')\n    const [image, setImage] = useState({ value: null, error: null })\n    const [images, setImages] = useState({ value: [], error: null })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    const config = {\n        readonly: false,\n        minHeight: 350,\n        uploader: {\n            \"insertImageAsBase64URI\": true\n        }\n    }\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        const optionsRes = await Requests.Options.Index(header)\n        if (optionsRes) {\n            setCategory(exCategory => ({ ...exCategory, options: optionsRes.categories }))\n        }\n        setLoading(false)\n    }, [header])\n\n    useEffect(() => {\n        fetchData()\n    }, [fetchData])\n\n    // Handle form submission\n    const onSubmit = async data => {\n\n        if (!vendor.value) return setVendor({ ...vendor, error: \"Vendor is required.\" })\n        if (!category.value) return setCategory({ ...category, error: \"Category is required.\" })\n        if (!tags.value.length) return setTags({ ...tags, error: \"Tags is required.\" })\n        if (!image.value) return setImage({ ...image, error: \"Product image is required.\" })\n        if (!images.value.length) return setImages({ ...images, error: \"Additional images is required.\" })\n\n        setCreate(true)\n        const formData = new FormData()\n        formData.append('name', data.name)\n        formData.append('vendor', vendor.value)\n        formData.append('brand', brand.value)\n        formData.append('category', category.value)\n        formData.append('tags', tags.value)\n        formData.append('sku', data.sku)\n        formData.append('stockAmount', data.stockAmount)\n        formData.append('purchasePrice', data.purchasePrice)\n        formData.append('salePrice', data.salePrice)\n        formData.append('additionalInfo', JSON.stringify(additional))\n        formData.append('description', content)\n        formData.append('video', data.video)\n        formData.append('image', image.value)\n        for (const key of Object.keys(images.value)) {\n            formData.append('images', images.value[key])\n        }\n\n\n        await Requests.Product.Store(formData, header)\n        setCreate(false)\n    }\n\n    if (loading) return <Loader />\n\n    return (\n        <div>\n            <Layout\n                page=\"dashboard / product store\"\n                message=\"Store new product for visible to website.\"\n                container=\"container-fluid\"\n                button={\n                    <div>\n                        <Link to=\"/dashboard/product\">\n                            <GrayButton type=\"button\">\n                                <ChevronLeft size={15} style={{ marginRight: 5 }} />\n                                <span style={{ fontSize: 13 }}>BACK</span>\n                            </GrayButton>\n                        </Link>\n                    </div>\n                }\n            />\n\n            <Main>\n                <div className=\"col-12\">\n                    <form onSubmit={handleSubmit(onSubmit)}>\n\n                        {/* Name */}\n                        <div className=\"form-group mb-4\">\n                            {errors.name && errors.name.message ?\n                                <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                : <p>Product name</p>}\n\n                            <input\n                                type=\"text\"\n                                placeholder=\"Enter product name\"\n                                className={errors.name ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                {...register(\"name\", { required: \"Product name is required\" })}\n                            />\n                        </div>\n\n                        <div className=\"row\">\n\n                            {/* Vendor */}\n                            <div className=\"col-12 col-lg-6\">\n                                <div className=\"form-group mb-4\">\n                                    {vendor.error ?\n                                        <p className=\"text-danger\">{vendor.error}</p>\n                                        : <p>Vendor</p>}\n\n                                    <SingleSelect\n                                        placeholder=\"vendor\"\n                                        error={vendor.error}\n                                        options={vendor.options}\n                                        value={event => setVendor({ ...vendor, value: event.value, error: null })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Brand */}\n                            <div className=\"col-12 col-lg-6\">\n                                <div className=\"form-group mb-4\">\n                                    <p>Brand</p>\n\n                                    <SingleSelect\n                                        placeholder=\"brand\"\n                                        options={brand.options}\n                                        value={event => setBrand({ ...brand, value: event.value })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Category */}\n                            <div className=\"col-12 col-lg-4\">\n                                <div className=\"form-group mb-4\">\n                                    {category.error ?\n                                        <p className=\"text-danger\">{category.error}</p>\n                                        : <p>Category</p>}\n\n                                    <SingleSelect\n                                        placeholder=\"category\"\n                                        error={category.error}\n                                        options={category.options}\n                                        value={event => setCategory({ ...category, value: event.value, error: null })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Tags */}\n                            <div className=\"col-12 col-lg-8\">\n                                <div className=\"form-group mb-4\">\n                                    {tags.error ?\n                                        <p className=\"text-danger\">{tags.error}</p>\n                                        : <p>Tags</p>}\n\n                                    <Creatable\n                                        placeholder=\"Enter tags\"\n                                        error={tags.error}\n                                        value={event => setTags({ value: event, error: null })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* SKU */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.sku && errors.sku.message ?\n                                        <p className=\"text-danger\">{errors.sku && errors.sku.message}</p>\n                                        : <p>Product SKU</p>}\n\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Enter product SKU\"\n                                        className={errors.sku ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"sku\", { required: \"Product SKU is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Stock amount */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.stockAmount && errors.stockAmount.message ?\n                                        <p className=\"text-danger\">{errors.stockAmount && errors.stockAmount.message}</p>\n                                        : <p>Stock amount</p>}\n\n                                    <input\n                                        type=\"number\"\n                                        placeholder=\"Enter stock amount\"\n                                        className={errors.stockAmount ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"stockAmount\", { required: \"Stock amount is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Purchase price */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.purchasePrice && errors.purchasePrice.message ?\n                                        <p className=\"text-danger\">{errors.purchasePrice && errors.purchasePrice.message}</p>\n                                        : <p>Purchase price</p>}\n\n                                    <input\n                                        type=\"number\"\n                                        placeholder=\"Enter stock amount\"\n                                        className={errors.purchasePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"purchasePrice\", { required: \"Purchase price is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Sale price */}\n                            <div className=\"col-12 col-lg-6 col-xl-3\">\n                                <div className=\"form-group mb-4\">\n                                    {errors.salePrice && errors.salePrice.message ?\n                                        <p className=\"text-danger\">{errors.salePrice && errors.salePrice.message}</p>\n                                        : <p>Sale price</p>}\n\n                                    <input\n                                        type=\"number\"\n                                        placeholder=\"Enter stock amount\"\n                                        className={errors.salePrice ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n                                        {...register(\"salePrice\", { required: \"Sale price is required\" })}\n                                    />\n                                </div>\n                            </div>\n\n                        </div>\n\n                        {/* Additional information */}\n                        <AdditionalInfo data={value => setAdditional(value)} />\n\n\n                        {/* Description */}\n                        <div className=\"form-group mb-4\">\n                            <p>Description</p>\n\n                            <JoditEditor\n                                ref={editor}\n                                value={content}\n                                config={config}\n                                tabIndex={8}\n                                onBlur={newContent => setContent(newContent)}\n                            />\n                        </div>\n\n                        {/* Youtube embed link */}\n                        <div className=\"form-group mb-4\">\n                            <p>Youtube embed link</p>\n\n                            <input\n                                type=\"text\"\n                                placeholder=\"Enter youtube embed link\"\n                                className=\"form-control shadow-none\"\n                                {...register(\"video\")}\n                            />\n                        </div>\n\n                        {/* Single File uploader */}\n                        <FileUploader\n                            width={100}\n                            height={100}\n                            limit={100}\n                            title=\"Product image\"\n                            error={image.error}\n                            dataHandeller={(data) => setImage({ ...image, value: data.image || null, error: data.error || null })}\n                        />\n\n                        {/* Additional images */}\n                        <MultiFileUploader\n                            width={100}\n                            height={100}\n                            limit={8192}\n                            error={images.error}\n                            title=\"Additional images\"\n                            dataHandeller={(data) => setImages({ ...images, value: data.images || null, error: data.error || null })}\n                        />\n\n                        <div className=\"text-end\">\n                            <PrimaryButton\n                                type=\"submit\"\n                                disabled={isCreate}\n                                className=\"px-4\"\n                            >\n                                {isCreate ? \"Loading ...\" : \"Submit\"}\n                            </PrimaryButton>\n                        </div>\n                    </form>\n                </div>\n            </Main>\n        </div>\n    );\n}\n\nexport default Create;"]},"metadata":{},"sourceType":"module"}